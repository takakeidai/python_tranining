# MVC理論について

MVC理論は、M:Model、V:View、C:Controllerの３つの部品を分けてアプリケーションを設計進める方法論に関する1つの概念
整理せずコードを闇雲に作成・追加・変更していくとコードの破綻につながりかねないため、1つの決まった方法論のもとでコードの役割を整理しながらアプリケーションを作成していこうという考え。

## Viewとは
ユーザーから受け取った指示やユーザーに返す情報に関して、それらの入出力を担当するコード。

## Controllerとは
ユーザーからの指示をViewが受け取り、その指示に従った操作をModel側に伝え実行させる役割や、逆にModelから受け取った情報をViewerに伝え表示させる役割を担うコード。
つまり、クライアント(ユーザー)、Viewer、Modelの橋渡しをする役割。

## Modelとは
実際にデータを処理するデータアクセス、ビジネスロジック(※)を担当している。

## MVCモデルの利点
ControllerがModelとViewerの仲介をすることで、Model内で定義されている指示とは無関係なメソッドやプロパティーに、Viewerがアクセスすることがなくなり効率が上がるだけではなく、その後のコード更新やバグ修正をModel内で完結させることができて余計な複雑化を防げる。

## 各サイトのMVCモデルの説明の微妙な差異について(画像を参照しながら)
しかし、さまざまなサイトで微妙に説明の仕方が異なり、上の説明はモデル1に依拠している。

モデル1だと、クライアントからリクエストを受け取るのはControllerで、その処理の命令をModelに渡しデータベースと色々と処理をさせて、その処理結果をViewに渡して、その上でControllerがViewに出力命令をさせて、Viewがレスポンスする。

![MVCモデル１](https://user-images.githubusercontent.com/89739843/134320674-b6035d39-7afa-44ca-b07f-5d9625cf9970.jpeg)

- モデル1のソース：https://gyroibaraki.com/mvc/


モデル2だと、クライアントから情報を受け取るのはViewで、受け取った情報をControllerに渡しControllerがModelに処理をさせて、その情報をViewが参照して、ControllerがViewに出力命令をする。

![MVCモデル2](https://user-images.githubusercontent.com/89739843/134320683-fb1ecd53-0037-4975-8f14-b46cf1dbbd75.png)

- モデル2のソース：https://qiita.com/riku-shiru/items/2bed096e106e72e0b58a


モデル1とモデル2の違いは、クライアントの情報をControllerが受け取ってModelにその指示を伝えるのか、Viewが受け取ってControllerに渡しModelに指示がいくかどうかという点が1つと

モデル3だと、多分明示されてはいないが、ViewとModelの間に矢印がないことから、Modelが操作し得られた情報は一旦Controllerに渡されてそれがViewに渡されると共に出力命令が下り表示される。

![MVCモデル3](https://user-images.githubusercontent.com/89739843/134321172-1b237a9c-9f07-4688-a13a-ef51e7cedb9b.jpeg)

- モデル3のソース：https://gihyo.jp/dev/serial/01/start_webap/0003



モデル3は、Modelの操作結果(処理結果)が、ModelとViewの間で直接的にやりとりされないという点でモデル1ともモデル2とも異なる。

モデル4では、Modelの処理結果をModelがViewに渡すのではなく、Viewがその結果を参照している。そしてControllerがViewに表示命令をしてViewがレスポンスする。

![MVCモデル4](https://user-images.githubusercontent.com/89739843/134321269-55a4b3fa-0456-498d-8ac5-dc856b9c737d.jpeg)

- モデル4のソース：https://kanda-it-school-kensyu.com/php-framework-contents/pfc_ch07/pfc_0701/

おそらくMVCモデルは概念なので、ある程度厳密性を犠牲にしてわかりやすい説明をどのサイトも採用している感じがする。



※ビジネスロジックとは「システムのコアな部分」
アプリケーションを、プレゼンテーション層、データアクセス層、ビジネスロジック層で分けるとすると、プレゼンテーションの役割は、そのアプリケーションとユーザ (またはクライアントプログラムなど) とのやりとりを担当する層＝ControllerやView
データアクセスの役割は、ファイルや DB に対してデータを読み書きすること
ビジネスロジックの役割は、そのアプリケーションの主目的・コアとなる操作

ビジネスロジックは、「エンタープライズビジネスルール」と「アプリケーションビジネスルール」に分けられる。
- エンタープライズビジネスルール：コアなルール系
ECサイトで購入する操作、じゃんけんプログラムでじゃんけんの判定をする操作
- アプリケーションビジネスルール：コアなルール系を成立させるための必要なロジック
ECサイトで購入した情報をDBに保存する操作、じゃんけんでどっちが何勝したかを記憶する操作





